@ filename: init_syth_8660.s
@
@ Initializes the features and rates of the RC8660 through UART4
@
@ Written by: James Ross

.text
.global _init_syth_8660
_init_syth_8660:
.equ UART4_BASE,    0x481A8000 @ UART4          	      Base Address
.equ UART_TXHR,	    0x0	  	   @ THR Transmit Holding     register offset

.equ CR_LOCKBAUD,   0x0D	   @ Character to send to 8660 to lock Baud rate

uart4Base .req R10
@********************* Start _init_syth_8660 ***********************************

	STMFD SP!, {R0-R10, LR}

	@ Lock Baud Rate by sending CR character
	ADD R3, uart4Base, #UART_TXHR
	MOV R4, #CR_LOCKBAUD
	STR R4, [R3]

@ Testing to set if it will talk ********	
	LDR R4, =MESSAGE
	LDRB R5, [R4], #0x1
	STR R5, [R3]
	LDRB R5, [R4], #0x1
	STR R5, [R3]
	LDRB R5, [R4], #0x1
	STR R5, [R3]
	LDRB R5, [R4], #0x1
	STR R5, [R3]
	LDRB R5, [R4], #0x1
	STR R5, [R3]
	LDRB R5, [R4], #0x1
	STR R5, [R3]


@****** END TEST ****	


	LDMFD SP!, {R0-R10, PC}
	
.data
.align 2
MESSAGE:
	.byte 0x0D
	.ascii "Hey."
	.byte 0x0D
.end
@*************** EOF **************